import{a as e}from"./chunk-MEABNXAK.js";import{a as i,b as g,c as E}from"./chunk-DQ6WAFCB.js";import"./chunk-V66ALGLP.js";function y({feature:s,selected:r,onToggle:o}){return e("button",{class:`w-full text-left border rounded-xl p-4 flex justify-between transition
        ${r?"border-primary-600 ring ring-primary-100":"border-gray-300"}`,onClick:o,children:[e("div",{class:"pr-4",children:[e("h5",{class:"font-medium",children:s.title}),e("p",{class:"text-xs text-gray-600 line-clamp-2",children:s.desc})]}),e("span",{class:`text-sm font-semibold self-start ${s.price?"":"text-gray-500"}`,children:s.price?`$${s.price}`:"Included"})]})}function k({steps:s,idx:r,setIdx:o}){let b=r/(s.length-1)*100;return e("div",{class:"relative mb-6",children:[e("div",{class:"absolute left-5 right-5 top-1/2 h-1 -translate-y-1/2 bg-gray-200 rounded"}),e("div",{class:"absolute left-5 top-1/2 h-1 -translate-y-1/2 bg-primary-600 rounded transition-all",style:{width:`${b}%`}}),e("div",{class:"relative flex gap-12 justify-between",children:s.map((n,c)=>e("button",{class:`w-10 h-10 rounded-full flex items-center justify-center font-bold
              ${c===r?"bg-primary-600 text-white":"bg-gray-200 text-gray-900"}`,onClick:()=>c<r&&o(c),style:{zIndex:1},children:c+1},c))})]})}function w({text:s}){let[r,o]=i(!1);return g(()=>{o(!1);let b=setTimeout(()=>o(!0),30);return()=>clearTimeout(b)},[s]),e("h3",{class:`text-lg font-semibold mb-4 transform transition-all duration-500 ease-out
        ${r?"opacity-100 translate-y-0":"opacity-0 translate-y-3"}`,children:s},s)}var I=s=>fetch(s).then(r=>r.json()),M=["Choose a base package","Select your web pages","Select your mobile screens","Review & checkout"],N=[{title:"Base package"},{title:"Web features"},{title:"Mobile features"},{title:"Review"}];function O(){let[s,r]=i({web:[],mobile:[]}),[o,b]=i({}),[n,c]=i("starter"),[m,$]=i([]),[l,x]=i(0),[f,j]=i(!1),[S,W]=i(12),[A,C]=i(!0),v=f?m:[...m].reverse();g(()=>{I("/api/features").then(r),I("/api/packages").then(t=>b(Object.fromEntries(t.map(a=>[a.key,a]))))},[]),g(()=>{if(!o[n]||s.web.length===0)return;let t=[...s.web,...s.mobile],a=(d,u=new Set)=>{if(u.has(d))return[];u.add(d);let T=o[d];return T?T.defaults.flatMap(h=>h.startsWith("@")?a(h.slice(1),u):h):[]},p=a(n);$(p.map(d=>t.find(u=>u.id===d)).filter(Boolean))},[n,o,s]);function R(t){if(t!==n){if(l!==0){c(t);return}C(!1),setTimeout(()=>{c(t),C(!0)},250)}}let F=t=>$(a=>a.some(p=>p.id===t.id)?a.filter(p=>p.id!==t.id):[...a,t]),{base:B,extras:H,total:P}=E(()=>{let t=(o[n]?.priceWeb??0)+(o[n]?.priceApp??0),a=o[n]?.defaults??[],p=m.filter(d=>!a.includes(d.id)).reduce((d,u)=>d+(u.price??0),0);return{base:t,extras:p,total:t+p}},[n,o,m]);return e("div",{class:"flex flex-col lg:flex-row gap-10",children:[e("div",{class:`relative lg:flex-1 cursor-pointer transition-opacity duration-250
          ${A?"opacity-100":"opacity-0"}
          ${f?"max-h-[70vh] overflow-y-auto p-2":""}`,onClick:()=>j(!f),children:f?e("div",{class:"grid auto-cols-fr grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:v.map(t=>e("img",{src:t.img??`https://images.unsplash.com/random/800x600?${encodeURIComponent(t.title)}&auto=compress`,alt:t.title,class:"w-full h-auto rounded-xl shadow-lg"},t.id))}):v.map((t,a)=>e("img",{src:t.img??`https://images.unsplash.com/random/800x600?${encodeURIComponent(t.title)}&auto=compress`,alt:t.title,class:"rounded-xl shadow-lg absolute transition-transform duration-300",style:{width:"280px",height:"180px",left:"50%",top:"15%",transform:`translate(-50%) rotate(${[-4,5,-6,8][a%4]}deg)`,zIndex:v.length-a}},t.id))}),e("aside",{class:"w-full lg:w-96 space-y-6",children:[e(k,{steps:N,idx:l,setIdx:x}),e(w,{text:M[l]}),l===0&&e("div",{class:"space-y-4",children:Object.values(o).map(t=>e("button",{class:`w-full border rounded-xl p-4 text-left ${t.key===n?"border-primary-600 ring ring-primary-100":"border-gray-300"}`,onClick:()=>R(t.key),children:[e("div",{class:"flex justify-between",children:[e("span",{class:"font-medium",children:t.label}),e("span",{class:"font-semibold",children:t.priceWeb+t.priceApp>0?`$${t.priceWeb+t.priceApp}`:"Custom"})]}),t.desc&&e("p",{class:"text-sm text-gray-600 mt-1",children:t.desc})]},t.key))}),l===1&&e("div",{class:"max-h-[60vh] overflow-y-auto space-y-3 pr-1",children:s.web.map(t=>e(y,{feature:t,selected:m.some(a=>a.id===t.id),onToggle:()=>F(t)},t.id))}),l===2&&e("div",{class:"max-h-[60vh] overflow-y-auto space-y-3 pr-1",children:s.mobile.map(t=>e(y,{feature:t,selected:m.some(a=>a.id===t.id),onToggle:()=>F(t)},t.id))}),l===3&&e("div",{class:"space-y-4",children:[e("h3",{class:"text-lg font-semibold",children:"Summary"}),e("div",{class:"border rounded-xl p-4 bg-gray-50 space-y-2",children:[e("div",{class:"flex justify-between",children:[e("span",{children:"Base package"}),e("span",{children:["$",B]})]}),e("div",{class:"flex justify-between",children:[e("span",{children:"Extras"}),e("span",{children:["$",H]})]}),e("div",{class:"flex justify-between font-bold text-primary-700",children:[e("span",{children:"Total"}),e("span",{children:["$",P]})]})]}),e("label",{class:"block text-sm font-medium mb-1",children:"Spread over"}),e("select",{class:"w-full border rounded-lg p-2",value:S,onChange:t=>W(Number(t.target.value)),children:[e("option",{value:12,children:"12\u202Fmonths"}),e("option",{value:24,children:"24\u202Fmonths"})]}),e("p",{class:"text-gray-600",children:["From\xA0",e("span",{class:"font-semibold",children:["$",(P/S).toFixed(2),"/mo"]})]}),e("button",{class:"w-full bg-primary-600 text-white rounded-full py-3 font-semibold",children:"Checkout \u2192"})]}),e("div",{class:"flex gap-3 pt-4",children:[e("button",{class:"flex-1 border rounded-full py-2 disabled:opacity-40 mb-10",disabled:l===0,onClick:()=>x(l-1),children:"Back"}),l<3&&e("button",{class:"flex-1 bg-primary-600 text-white rounded-full py-2 mb-10",onClick:()=>x(l+1),children:"Next"})]})]})]})}export{O as default};
